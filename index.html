<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºæ…§ç©ºæ°£å“è³ªæ©Ÿå™¨äºº | LINE Bot</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', sans-serif; 
            background: linear-gradient(-45deg, #667eea, #764ba2, #6b73ff, #9644ff); 
            background-size: 400% 400%;
            animation: gradient-shift 8s ease infinite;
            min-height: 100vh; 
            padding: 2rem 1rem;
        }
        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .hero-section { 
            background: white; 
            padding: 3rem; 
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); 
            text-align: center; 
            margin-bottom: 3rem;
        }
        h1 { color: #333; margin-bottom: 1rem; font-size: 2.5rem; }
        p { color: #666; margin-bottom: 2rem; font-size: 1.2rem; line-height: 1.6; }
        .cta-button { 
            display: inline-block; 
            background: #00b900; 
            color: white; 
            padding: 15px 40px; 
            border-radius: 50px; 
            text-decoration: none; 
            font-weight: 600; 
            transition: all 0.3s ease; 
            margin: 0.5rem;
        }
        .cta-button:hover { 
            transform: translateY(-3px); 
            box-shadow: 0 10px 30px rgba(0,185,0,0.3); 
        }
        .features { 
            margin-top: 2rem; 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); 
            gap: 1rem; 
        }
        .feature { 
            padding: 1rem; 
            background: #f8fafc; 
            border-radius: 10px; 
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .feature i { 
            font-size: 2rem; 
            color: #00b900; 
            margin-bottom: 0.5rem; 
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            background: #00e400;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* èŠå¤©å±•ç¤ºå€åŸŸ */
        .chat-demos {
            background: white;
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            margin-bottom: 3rem;
        }
        
        .demo-tabs {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #f0f0f0;
        }
        
        .demo-tab {
            padding: 0.8rem 1.5rem;
            background: #f8fafc;
            border: none;
            border-radius: 20px 20px 0 0;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
            font-size: 0.9rem;
        }
        
        .demo-tab.active {
            background: #00b900;
            color: white;
            transform: translateY(2px);
        }
        
        .chat-container {
            max-width: 400px;
            margin: 0 auto;
            background: #f8fafc;
            border-radius: 20px;
            padding: 1rem;
            min-height: 500px;
            position: relative;
            border: 3px solid #ddd;
        }
        
        .chat-header {
            display: flex;
            align-items: center;
            padding: 1rem;
            background: #00b900;
            color: white;
            border-radius: 15px 15px 0 0;
            margin: -1rem -1rem 1rem -1rem;
        }
        
        .chat-header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 1rem;
            background: white;
            padding: 5px;
        }
        
        .chat-messages {
            height: 400px;
            overflow-y: auto;
            padding: 0.5rem;
        }
        
        .message {
            margin: 1rem 0;
            display: flex;
            align-items: flex-end;
            opacity: 0;
            animation: messageAppear 0.5s ease forwards;
        }
        
        .message.user {
            justify-content: flex-end;
        }
        
        .message.bot {
            justify-content: flex-start;
        }
        
        .message-bubble {
            max-width: 80%;
            padding: 0.8rem 1.2rem;
            border-radius: 18px;
            font-size: 0.9rem;
            line-height: 1.4;
            position: relative;
        }
        
        .message.user .message-bubble {
            background: #00b900;
            color: white;
            border-bottom-right-radius: 5px;
        }
        
        .message.bot .message-bubble {
            background: white;
            color: #333;
            border: 1px solid #e1e8ed;
            border-bottom-left-radius: 5px;
        }
        
        .message-time {
            font-size: 0.7rem;
            color: #999;
            margin: 0 0.5rem;
        }
        
        .typing-indicator {
            display: none;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .typing-dots {
            display: inline-flex;
            align-items: center;
            padding: 0.8rem 1.2rem;
            background: white;
            border: 1px solid #e1e8ed;
            border-radius: 18px;
            border-bottom-left-radius: 5px;
        }
        
        .typing-dots span {
            width: 6px;
            height: 6px;
            background: #999;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.5s infinite;
        }
        
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; }
            30% { opacity: 1; }
        }
        
        @keyframes messageAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .demo-description {
            text-align: center;
            margin-bottom: 2rem;
            color: #666;
            font-size: 1.1rem;
        }
        
        .flex-message-preview {
            background: #f0f8ff;
            border: 2px dashed #00b900;
            border-radius: 15px;
            padding: 1rem;
            margin: 0.5rem 0;
            font-size: 0.8rem;
            color: #666;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .hero-section, .chat-demos {
                padding: 2rem 1.5rem;
            }
            h1 { font-size: 2rem; }
            .demo-tabs {
                gap: 0.2rem;
            }
            .demo-tab {
                padding: 0.6rem 1rem;
                font-size: 0.8rem;
            }
            .chat-container {
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1>ğŸŒ¬ï¸ æ™ºæ…§ç©ºæ°£å“è³ªæ©Ÿå™¨äºº</h1>
            <p><span class="status-indicator"></span>æœå‹™æ­£å¸¸é‹è¡Œä¸­</p>
            <p>å³æ™‚ç›£æ¸¬ç©ºæ°£å“è³ªï¼Œå®ˆè­·æ‚¨å’Œå®¶äººçš„å¥åº·</p>
            
            <div style="margin: 2rem 0;">
                <a href="https://line.me/R/ti/p/@470kdmxx" class="cta-button" target="_blank">
                    <i class="fab fa-line"></i> ç«‹å³åŠ å…¥å¥½å‹
                </a>
                <a href="/health" class="cta-button" style="background: #42a5f5;">
                    ğŸ”§ æœå‹™ç‹€æ…‹
                </a>
            </div>
            
            <div class="features">
                <div class="feature" onclick="showDemo('query')">
                    <i class="fas fa-search-location"></i>
                    <h4>å³æ™‚æŸ¥è©¢</h4>
                    <p>30+ æ”¯æ´åŸå¸‚</p>
                </div>
                <div class="feature" onclick="showDemo('compare')">
                    <i class="fas fa-chart-line"></i>
                    <h4>å¤šåŸå¸‚æ¯”è¼ƒ</h4>
                    <p>æ™ºæ…§æ’åºæ¨è–¦</p>
                </div>
                <div class="feature" onclick="showDemo('health')">
                    <i class="fas fa-user-md"></i>
                    <h4>å¥åº·å»ºè­°</h4>
                    <p>å°ˆæ¥­é˜²è­·æŒ‡å°</p>
                </div>
                <div class="feature" onclick="showDemo('subscribe')">
                    <i class="fas fa-bell"></i>
                    <h4>è¨‚é–±æé†’</h4>
                    <p>æ¯æ—¥å ±å‘Š+è­¦å ±</p>
                </div>
                <div class="feature" onclick="showDemo('location')">
                    <i class="fas fa-map-marker-alt"></i>
                    <h4>GPSå®šä½</h4>
                    <p>é™„è¿‘ç›£æ¸¬ç«™æŸ¥è©¢</p>
                </div>
                <div class="feature" onclick="showDemo('ai')">
                    <i class="fas fa-robot"></i>
                    <h4>AIæ™ºæ…§</h4>
                    <p>è‡ªç„¶èªè¨€ç†è§£</p>
                </div>
            </div>
        </div>
        
        <!-- Chat Demos Section -->
        <div class="chat-demos">
            <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">ğŸ’¬ åŠŸèƒ½å±•ç¤º</h2>
            <p class="demo-description">é»æ“Šä¸Šæ–¹åŠŸèƒ½å¡ç‰‡æˆ–ä¸‹æ–¹æ¨™ç±¤ï¼ŒæŸ¥çœ‹çœŸå¯¦å°è©±ç¯„ä¾‹</p>
            
            <div class="demo-tabs">
                <button class="demo-tab active" onclick="showDemo('query')">ğŸ” å³æ™‚æŸ¥è©¢</button>
                <button class="demo-tab" onclick="showDemo('compare')">ğŸ“Š åŸå¸‚æ¯”è¼ƒ</button>
                <button class="demo-tab" onclick="showDemo('health')">ğŸ’Š å¥åº·å»ºè­°</button>
                <button class="demo-tab" onclick="showDemo('subscribe')">ğŸ”” è¨‚é–±åŠŸèƒ½</button>
                <button class="demo-tab" onclick="showDemo('location')">ğŸ“ GPSå®šä½</button>
                <button class="demo-tab" onclick="showDemo('ai')">ğŸ¤– AIæ™ºæ…§</button>
            </div>
            
            <div class="chat-container">
                <div class="chat-header">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMwMGI5MDAiLz4KPHRleHQgeD0iMjAiIHk9IjI2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIyMCI+8J+MrjwvdGV4dD4KPC9zdmc+" alt="Bot Avatar">
                    <div>
                        <div style="font-weight: bold;">æ™ºæ…§ç©ºæ°£å“è³ªæ©Ÿå™¨äºº</div>
                        <div style="font-size: 0.8rem; opacity: 0.9;">ç·šä¸Š</div>
                    </div>
                </div>
                <div class="chat-messages" id="chatMessages">
                    <!-- Messages will be inserted here -->
                </div>
                <div class="typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Quick Links -->
        <div class="hero-section">
            <h3 style="color: #333; margin-bottom: 1rem;">ğŸš€ å¿«é€Ÿæ¸¬è©¦</h3>
            <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; font-size: 0.9rem;">
                <a href="/api/air-quality/taipei" style="color: #00b900; text-decoration: none;">ğŸ“¡ å°åŒ—ç©ºæ°£å“è³ªAPI</a>
                <a href="/api/air-quality/kaohsiung" style="color: #00b900; text-decoration: none;">ğŸ“¡ é«˜é›„ç©ºæ°£å“è³ªAPI</a>
                <a href="/debug" style="color: #666; text-decoration: none;">ğŸ” ç³»çµ±è¨ºæ–·</a>
            </div>
            
            <div style="margin-top: 2rem; padding-top: 1rem; border-top: 1px solid #eee; font-size: 0.85rem; color: #999;">
                Â© 2025 æ™ºæ…§ç©ºæ°£å“è³ªæ©Ÿå™¨äºº | ç”¨ç§‘æŠ€å®ˆè­·æ¯ä¸€æ¬¡å‘¼å¸ ğŸŒ±
            </div>
        </div>
    </div>

<script>
const demos = {
    query: {
        title: 'ğŸ” å³æ™‚ç©ºæ°£å“è³ªæŸ¥è©¢',
        description: 'è¼¸å…¥åŸå¸‚åç¨±ï¼Œç«‹å³ç²å¾—è©³ç´°çš„ç©ºæ°£å“è³ªå ±å‘Š',
        messages: [
            { type: 'user', text: 'å°åŒ—ç©ºæ°£å“è³ª', time: '14:30' },
            { type: 'bot', text: 'æ­£åœ¨æŸ¥è©¢å°åŒ—çš„ç©ºæ°£å“è³ªæ•¸æ“š...', time: '14:30', delay: 1000 },
            { type: 'bot', content: 'flex', title: 'å°åŒ—ç©ºæ°£å“è³ªå ±å‘Š', 
              preview: 'ğŸŒ¬ï¸ AQI: 65 (æ™®é€š)\\nğŸ“ å°åŒ—å¸‚\\nğŸ˜· å»ºè­°é…æˆ´ä¸€èˆ¬å£ç½©\\nğŸƒâ€â™‚ï¸ é©åˆæ•£æ­¥ã€ç‘œä¼½', 
              time: '14:31', delay: 2500 }
        ]
    },
    compare: {
        title: 'ğŸ“Š å¤šåŸå¸‚ç©ºæ°£å“è³ªæ¯”è¼ƒ',
        description: 'ä¸€æ¬¡æ¯”è¼ƒå¤šå€‹åŸå¸‚ï¼Œæ™ºæ…§æ’åºæ¨è–¦æœ€ä½³é¸æ“‡',
        messages: [
            { type: 'user', text: 'æ¯”è¼ƒå°åŒ—é«˜é›„å°ä¸­', time: '15:20' },
            { type: 'bot', text: 'æ­£åœ¨æ¯”è¼ƒä¸‰å€‹åŸå¸‚çš„ç©ºæ°£å“è³ª...', time: '15:20', delay: 1000 },
            { type: 'bot', content: 'flex', title: 'ğŸ† å¤šåŸå¸‚æ¯”è¼ƒçµæœ', 
              preview: 'ğŸ¥‡ å°ä¸­ AQI: 45 (è‰¯å¥½)\\nğŸ¥ˆ å°åŒ— AQI: 65 (æ™®é€š)\\nğŸ¥‰ é«˜é›„ AQI: 85 (æ™®é€š)\\n\\nâœˆï¸ æ¨è–¦å‰å¾€å°ä¸­ï¼', 
              time: '15:21', delay: 3000 }
        ]
    },
    health: {
        title: 'ğŸ’Š å°ˆæ¥­å¥åº·å»ºè­°',
        description: 'æ ¹æ“šç©ºæ°£å“è³ªæä¾›å€‹äººåŒ–å¥åº·é˜²è­·æŒ‡å°',
        messages: [
            { type: 'user', text: 'é«˜é›„ç©ºæ°£å“è³ª', time: '16:45' },
            { type: 'bot', content: 'flex', title: 'é«˜é›„ç©ºæ°£å“è³ªå ±å‘Š', 
              preview: 'ğŸ˜° AQI: 120 (ä¸å¥åº·)\\nğŸš¨ å»ºè­°æ¸›å°‘æˆ¶å¤–æ´»å‹•\\nğŸ˜· å¿…é ˆé…æˆ´N95å£ç½©\\nğŸ  é—œé–‰é–€çª—ä½¿ç”¨ç©ºæ°£æ¸…æ·¨æ©Ÿ', 
              time: '16:46', delay: 2000 },
            { type: 'user', text: 'å¯ä»¥é‹å‹•å—ï¼Ÿ', time: '16:47' },
            { type: 'bot', text: 'ç›®å‰é«˜é›„AQIç‚º120ï¼Œå»ºè­°ï¼š\\n\\nğŸ  åƒ…å»ºè­°å®¤å…§è¼•åº¦æ´»å‹•\\nğŸš« é¿å…æˆ¶å¤–é‹å‹•\\nğŸ’ª å¯åœ¨å®¤å…§åšç‘œä¼½ã€ä¼¸å±•\\nâš ï¸ æ•æ„Ÿæ—ç¾¤è«‹ç‰¹åˆ¥æ³¨æ„', time: '16:47', delay: 1500 }
        ]
    },
    subscribe: {
        title: 'ğŸ”” è¨‚é–±æé†’æœå‹™',
        description: 'æ¯æ—¥æ¨é€ç©ºæ°£å“è³ªå ±å‘Šï¼Œæƒ¡åŒ–æ™‚ç«‹å³è­¦å ±',
        messages: [
            { type: 'user', text: 'è¨‚é–±å°åŒ—', time: '09:15' },
            { type: 'bot', text: 'âœ… å·²æˆåŠŸè¨‚é–±å°åŒ—çš„ç©ºæ°£å“è³ªæé†’ï¼\\n\\nğŸ“… æ¯æ—¥ 08:00 æ¨é€å ±å‘Š\\nğŸš¨ AQI>100 æ™‚ç·Šæ€¥è­¦å ±\\n\\nè¼¸å…¥ã€Œæˆ‘çš„è¨‚é–±ã€æŸ¥çœ‹æ¸…å–®', time: '09:15', delay: 1000 },
            { type: 'user', text: 'æˆ‘çš„è¨‚é–±', time: '09:16' },
            { type: 'bot', text: 'ğŸ“‹ æ‚¨çš„è¨‚é–±æ¸…å–®ï¼š\\n\\n1. å°åŒ—\\n\\nâš™ï¸ è¨­å®šï¼š\\nâ€¢ ğŸ“… æ¯æ—¥å ±å‘Šï¼šå·²é–‹å•Ÿ\\nâ€¢ ğŸš¨ ç·Šæ€¥è­¦å ±ï¼šå·²é–‹å•Ÿ\\nâ€¢ âš ï¸ è­¦å ±é–¾å€¼ï¼šAQI > 100', time: '09:16', delay: 1200 }
        ]
    },
    location: {
        title: 'ğŸ“ GPSå®šä½æŸ¥è©¢',
        description: 'åˆ†äº«ä½ç½®å³å¯æŸ¥è©¢é™„è¿‘ç›£æ¸¬ç«™çš„ç©ºæ°£å“è³ª',
        messages: [
            { type: 'user', text: '[åˆ†äº«äº†ä½ç½®]', time: '12:30', location: true },
            { type: 'bot', text: 'æ­£åœ¨æŸ¥æ‰¾æ‚¨é™„è¿‘çš„ç©ºæ°£å“è³ªç›£æ¸¬ç«™...', time: '12:30', delay: 1500 },
            { type: 'bot', content: 'flex', title: 'ğŸ“ é™„è¿‘ç›£æ¸¬ç«™', 
              preview: '1. å°åŒ—è»Šç«™ (0.8km)\\n   AQI: 62 (æ™®é€š)\\n\\n2. ä¸­å±±ç«™ (1.2km)\\n   AQI: 58 (æ™®é€š)\\n\\n3. è¥¿é–€ç«™ (1.5km)\\n   AQI: 65 (æ™®é€š)', 
              time: '12:31', delay: 3000 }
        ]
    },
    ai: {
        title: 'ğŸ¤– AIæ™ºæ…§å°è©±',
        description: 'è‡ªç„¶èªè¨€ç†è§£ï¼Œæ”¯æ´å¤šç¨®éˆæ´»çš„æŸ¥è©¢æ–¹å¼',
        messages: [
            { type: 'user', text: 'ä»Šå¤©é©åˆå‡ºé–€å—ï¼Ÿæˆ‘åœ¨å°åŒ—', time: '08:30' },
            { type: 'bot', text: 'è®“æˆ‘æŸ¥ä¸€ä¸‹å°åŒ—ä»Šå¤©çš„ç©ºæ°£å“è³ª...', time: '08:30', delay: 1000 },
            { type: 'bot', text: 'å°åŒ—ä»Šå¤©AQIç‚º65ï¼ˆæ™®é€šç­‰ç´šï¼‰\\n\\nğŸ˜Š é©åˆå‡ºé–€ï¼å»ºè­°ï¼š\\nâ€¢ ğŸš¶â€â™‚ï¸ é©åˆæ•£æ­¥ã€è¼•åº¦é‹å‹•\\nâ€¢ ğŸ˜· å»ºè­°é…æˆ´ä¸€èˆ¬å£ç½©\\nâ€¢ âš ï¸ æ•æ„Ÿæ—ç¾¤æ³¨æ„é˜²è­·', time: '08:31', delay: 2500 },
            { type: 'user', text: 'è¬è¬ï¼', time: '08:32' },
            { type: 'bot', text: 'ä¸å®¢æ°£ï¼ğŸ˜Š éš¨æ™‚ç‚ºæ‚¨ç›£æ¸¬ç©ºæ°£å“è³ªã€‚\\nå¦‚éœ€å…¶ä»–åŸå¸‚è³‡è¨Šæˆ–æƒ³è¨‚é–±æé†’ï¼Œéƒ½å¯ä»¥å‘Šè¨´æˆ‘å–”ï½', time: '08:32', delay: 800 }
        ]
    }
};

let currentDemo = 'query';
let messageIndex = 0;
let isPlaying = false;

function showDemo(demoKey) {
    if (isPlaying) return;
    
    currentDemo = demoKey;
    messageIndex = 0;
    
    // Update tab styles
    document.querySelectorAll('.demo-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    event?.target?.classList.add('active') || 
    document.querySelector(`[onclick="showDemo('${demoKey}')"]`).classList.add('active');
    
    // Clear messages
    const messagesContainer = document.getElementById('chatMessages');
    messagesContainer.innerHTML = '';
    
    // Start playing messages
    playDemo();
}

function playDemo() {
    if (isPlaying) return;
    isPlaying = true;
    
    const demo = demos[currentDemo];
    const messagesContainer = document.getElementById('chatMessages');
    const typingIndicator = document.getElementById('typingIndicator');
    
    function showNextMessage() {
        if (messageIndex >= demo.messages.length) {
            isPlaying = false;
            return;
        }
        
        const message = demo.messages[messageIndex];
        const delay = message.delay || 0;
        
        // Show typing indicator for bot messages
        if (message.type === 'bot' && delay > 500) {
            typingIndicator.style.display = 'block';
            setTimeout(() => {
                typingIndicator.style.display = 'none';
                addMessage(message);
                messageIndex++;
                setTimeout(showNextMessage, 500);
            }, delay);
        } else {
            setTimeout(() => {
                addMessage(message);
                messageIndex++;
                setTimeout(showNextMessage, 500);
            }, delay);
        }
    }
    
    showNextMessage();
}

function addMessage(message) {
    const messagesContainer = document.getElementById('chatMessages');
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${message.type}`;
    
    let messageContent = '';
    
    if (message.content === 'flex') {
        messageContent = `
            <div class="message-bubble">
                <div class="flex-message-preview">
                    <strong>${message.title}</strong><br>
                    <div style="margin-top: 0.5rem; font-size: 0.75rem;">
                        ${message.preview.replace(/\\n/g, '<br>')}
                    </div>
                </div>
            </div>
            <div class="message-time">${message.time}</div>
        `;
    } else if (message.location) {
        messageContent = `
            <div class="message-bubble">
                ğŸ“ ä½ç½®è³‡è¨Š
                <div style="margin-top: 0.5rem; padding: 0.5rem; background: rgba(0,0,0,0.1); border-radius: 8px; font-size: 0.8rem;">
                    ğŸ—ºï¸ å°åŒ—å¸‚ä¸­æ­£å€<br>
                    ğŸ“Œ 25.0478Â°N, 121.5319Â°E
                </div>
            </div>
            <div class="message-time">${message.time}</div>
        `;
    } else {
        messageContent = `
            <div class="message-bubble">${message.text.replace(/\\n/g, '<br>')}</div>
            <div class="message-time">${message.time}</div>
        `;
    }
    
    messageDiv.innerHTML = messageContent;
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// Initialize with first demo
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => showDemo('query'), 1000);
});

// Auto-cycle demos every 15 seconds when not manually controlled
let autoCycleTimer;
function startAutoCycle() {
    const demoKeys = Object.keys(demos);
    let currentIndex = 0;
    
    autoCycleTimer = setInterval(() => {
        if (!isPlaying) {
            currentIndex = (currentIndex + 1) % demoKeys.length;
            showDemo(demoKeys[currentIndex]);
        }
    }, 15000);
}

// Start auto-cycle after initial load
setTimeout(startAutoCycle, 10000);

// Pause auto-cycle when user interacts
document.querySelectorAll('.demo-tab, .feature').forEach(element => {
    element.addEventListener('click', () => {
        clearInterval(autoCycleTimer);
        setTimeout(startAutoCycle, 30000); // Restart after 30 seconds
    });
});
</script>
</body>
</html>